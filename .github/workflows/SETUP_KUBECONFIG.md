# ЁЯФС KUBECONFIG Setup Guide (Kubeconfig рж╕рзЗржЯржЖржк ржЧрж╛ржЗржб)

## ржПржЯрж╛ ржХрж┐? (What is it?)
**Kubeconfig** рж╣рж▓рзЛ ржЖржкржирж╛рж░ ржХрзБржмрж╛рж░ржирзЗржЯрж┐рж╕ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗрж░ "ржЪрж╛ржмрж┐" ржмрж╛ **Access Key**ред 
ржПржЯрж┐ ржПржХржЯрж┐ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓ ржпрж╛рж░ ржоржзрзНржпрзЗ ржерж╛ржХрзЗ:
1.  **Cluster Info:** ржЖржкржирж╛рж░ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ ржХрзЛржерж╛рзЯ ржЖржЫрзЗ (IP Address)ред
2.  **User Info:** ржЖржкржирж┐ ржХрзЗ (Username & Client Certificate)ред
3.  **Context:** ржХрзЛржи ржЗржЙржЬрж╛рж░рзЗ ржХрзЛржи ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░ржмрзЗржиред

рж╕рж╣ржЬ ржХржерж╛рзЯ, ржЖржкржирж╛рж░ рж▓рзЛржХрж╛рж▓ ржкрж┐рж╕рж┐ ржмрж╛ ржЧрж┐ржЯрж╣рж╛ржм ржЕрзНржпрж╛ржХрж╢ржи ржерзЗржХрзЗ `kubectl` ржХржорж╛ржирзНржб ржЪрж╛рж▓рж┐рзЯрзЗ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рж╛рж░ ржЬржирзНржп ржПржЗ ржлрж╛ржЗрж▓ржЯрж┐ рж▓рж╛ржЧрзЗред

## ржПржЯрж╛ ржХрзЗржи ржжрж░ржХрж╛рж░? (Why do we need it?)
ржЖржорж╛ржжрзЗрж░ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ржЯрж┐ **AWS Cloud**-ржП рждрзИрж░рж┐ ржХрж░рж╛ ржПржмржВ ржПржЯрж┐ ржкрзНрж░рж╛ржЗржнрзЗржЯ ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ (Private IP) ржЖржЫрзЗред 
- ржЖржкржирж┐ ржпржжрж┐ ржЖржкржирж╛рж░ рж▓рзНржпрж╛ржкржЯржк ржерзЗржХрзЗ `kubectl get pods` ржХржорж╛ржирзНржб ржжрж┐рждрзЗ ржЪрж╛ржи, рждрж╛рж╣рж▓рзЗ ржЖржкржирж╛рж░ ржкрж┐рж╕рж┐ржХрзЗ ржЬрж╛ржирждрзЗ рж╣ржмрзЗ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ржЯрж┐ ржХрзЛржерж╛рзЯ ржПржмржВ ржкрж╛рж░ржорж┐рж╢ржи ржЖржЫрзЗ ржХрж┐ржирж╛ред
- **CD Pipeline (Github Actions)** ржпржЦржи ржЕржЯрзЛржорзЗржЯрж┐ржХ ржбрж┐ржкрзНрж▓рзЯ ржХрж░ржмрзЗ, рждржЦржи рждрж╛рж░ржУ ржПржЗ ржкрж╛рж░ржорж┐рж╢ржи рж▓рж╛ржЧржмрзЗред
ржПржЗ ржлрж╛ржЗрж▓ржЯрж┐ ржЫрж╛рзЬрж╛ ржЖржкржирж┐ ржмрж╛ ржЧрж┐ржЯрж╣рж╛ржм ржЕрзНржпрж╛ржХрж╢ржи ржХрзЗржЙ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржХржерж╛ ржмрж▓рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

---

## ржХрж┐ржнрж╛ржмрзЗ рж╕рзЗржЯржЖржк ржХрж░ржмрзЗржи? (How to Setup)

ржЖржорж░рж╛ ржПржХржЯрж┐ ржЕржЯрзЛржорзЗржЯрзЗржб рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржмрж╛ржирж┐рзЯрзЗржЫрж┐ ржпрж╛ **Bastion Server** рж╣рзЯрзЗ **Master Node** ржерзЗржХрзЗ ржПржЗ ржлрж╛ржЗрж▓ржЯрж┐ ржирж┐рж░рж╛ржкржжрзЗ ржЖржкржирж╛рж░ ржкрж┐рж╕рж┐рждрзЗ ржирж┐рзЯрзЗ ржЖрж╕ржмрзЗред

### Step 1: Kubeconfig ржбрж╛ржЙржирж▓рзЛржб ржХрж░рж╛

рзз. ржЖржкржирж╛рж░ ржкрзНрж░рзЛржЬрзЗржХрзНржЯрзЗрж░ рж░рзБржЯ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржУржкрзЗржи ржХрж░рзБржиред
рзи. ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ ржЪрж╛рж▓рж╛ржи:
   ```bash
   ./scripts/fetch-kubeconfig.sh
   ```
   *(ржПржЯрж┐ ржЕржЯрзЛржорзЗржЯрж┐ржХ Bastion рж╣рзЯрзЗ Master ржирзЛржбрзЗ ржврзБржХрзЗ ржХржиржлрж┐ржЧ ржлрж╛ржЗрж▓ржЯрж┐ ржХржкрж┐ ржХрж░рзЗ ржЖржиржмрзЗ)*

рзй. рж╕рзНржХрзНрж░рж┐ржкрзНржЯржЯрж┐ ржЪрж▓рж╛рж░ ржкрж░ ржЖржкржирж┐ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржПржХржЯрж┐ ржЖржЙржЯржкрзБржЯ ржкрж╛ржмрзЗржи ржПржмржВ `kubeconfig_fetched` ржирж╛ржорзЗ ржПржХржЯрж┐ ржлрж╛ржЗрж▓ рж╕рзЗржн рж╣ржмрзЗред

### Step 2: GitHub Secrets ржП ржпрзБржХрзНржд ржХрж░рж╛

GitHub Actions ржпрж╛рждрзЗ ржбрж┐ржкрзНрж▓рзЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ, рждрж╛рж░ ржЬржирзНржп ржПржЗ рждржерзНржпржЧрзБрж▓рзЛ GitHub Repo-рждрзЗ **Secret** рж╣рж┐рж╕рзЗржмрзЗ рж╕рзЗржн ржХрж░рждрзЗ рж╣ржмрзЗред

**ржпрзЗржЦрж╛ржирзЗ ржпрж╛ржмрзЗржи:**
GitHub Repo > **Settings** > **Secrets and variables** > **Actions**

#### рзз. 'Secrets' ржЯрзНржпрж╛ржмрзЗрж░ ржирж┐ржЪрзЗ ржпрзБржХрзНржд ржХрж░рзБржи:
- **Name:** `KUBECONFIG`
  - **Value:** (ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржжрзЗржЦрж╛ржирзЛ ржкрзБрж░рзЛ `kubeconfig` ржХржирзНржЯрзЗржирзНржЯ ржХржкрж┐ ржХрж░рзЗ ржкрзЗрж╕рзНржЯ ржХрж░рзБржи)
- **Name:** `SSH_PRIVATE_KEY`
  - **Value:** (ржЖржкржирж╛рж░ `dhakacart-k8s-key.pem` ржлрж╛ржЗрж▓рзЗрж░ ржнрзЗрждрж░рзЗрж░ рж╕ржм рж▓рзЗржЦрж╛)

#### рзи. 'Variables' ржЯрзНржпрж╛ржмрзЗрж░ ржирж┐ржЪрзЗ ржпрзБржХрзНржд ржХрж░рзБржи:
- **Name:** `BASTION_IP`
  - **Value:** (рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржЖржЙржЯржкрзБржЯ ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ Bastion IP, ржпрзЗржоржи `54.251.x.x`)
- **Name:** `MASTER_PRIVATE_IP`
  - **Value:** `10.0.10.10` (Master Node ржПрж░ ржкрзНрж░рж╛ржЗржнрзЗржЯ ржЖржЗржкрж┐)

---

### тЪая╕П рж╕рждрж░рзНржХрждрж╛ (Warning)
ржПржЗ `KUBECONFIG` ржлрж╛ржЗрж▓ржЯрж┐ ржпрж╛рж░ ржХрж╛ржЫрзЗ ржерж╛ржХржмрзЗ, рж╕рзЗ ржЖржкржирж╛рж░ ржкрзБрж░рзЛ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗрж░ **ADMIN**ред рждрж╛ржЗ ржПржЯрж┐ ржХржЦржирзЛ ржкрж╛ржмрж▓рж┐ржХрж▓рж┐ рж╢рзЗрзЯрж╛рж░ ржХрж░ржмрзЗржи ржирж╛ ржмрж╛ ржЧрж┐ржЯрж╣рж╛ржмрзЗ ржкрзБрж╢ ржХрж░ржмрзЗржи ржирж╛ред ржЖржорж░рж╛ `.gitignore` ржлрж╛ржЗрж▓рзЗ ржПржЯрж┐ ржмрзНрж▓ржХ ржХрж░рзЗ рж░рзЗржЦрзЗржЫрж┐ред
